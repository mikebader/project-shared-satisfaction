## Analyze Where People Would *Not* Consider Moving

Replicate the analysis of where people would consider moving for the question where people would *not* consider moving by race. 

First, I examine how many people indicate that they would not consider at least one of the communities and the number of communities people would not consider by race. 

```{r not-consider-any}
# nconsany_res <- MIcombine(with(dcassvy,
#                               svyglm(notconsider_any~dem.race, 
#                                      family=quasibinomial)))
# huxreg(nconsany_res)
# (nconsany_sum <- summary(nconsany_res))
# logits <- nconsany_sum[1,1] + c(0, nconsany_sum[2:4,1])
# probs <- round(exp(logits)/(1+exp(logits)), 2)*100
# names(probs) <- races
# probs
# 
# ## Don't need multiple imputation because no missing on race or not consider:
# ## race by construction of the data, not consider by design of survey (i.e., 
# ## no answer means 'no')
# dcassvy_full <- svydesign(id=~1,strata=~sample_strata,weights=~weight,data=dcas)
# (nconsnum_mean <- svyby(~notconsider_num, ~dem.race, dcassvy_full, svymean) %>%
#     coef() %>%
#     round(1))
# 
# svymedian <- function(race) {
#     svyquantile(~notconsider_num, subset(dcassvy_full, dem.race==race),
#                 quantiles=c(.5))
# }
# (quantiles <- round(sapply(c('white','api','black','latino'), svymedian), 1))
```

<!-- `#r probs[1]`% of whites indicated at least one community that they would not consider at least one of the eleven other multiethnic neighborhoods on the list; `#r probs[2]`% of Asians, `#r probs[3]`% of blacks, and `#r probs[4]`% of Asians. -->

<!-- The mean number of communities selected by whites was `#r nconsnum_mean[1]`, by Asians was `#r nconsnum_mean[2]`, by blacks was `#r nconsnum_mean[3]`, and by Latinos was `#r nconsnum_mean[4]`. -->

Next, I conduct the multivariate analyses and report the results in tables and plots.

```{r not-consider-analysis}
## Constant-only
ncons_constant <- lapply(comm_names, srch_reg, 'nc', '1')

## Race-only
ncons_raceonly <- lapply(comm_names, srch_reg, 'nc')

## Race with controls
ncons_racecont <- lapply(comm_names, srch_reg, 'nc', m2, include.live=TRUE)

## Controls-only
ncons_contonly <- lapply(comm_names, srch_reg, 
                         'nc', sub('dem.race\\+','',m2), include.live=TRUE)

srch_tbl(c(ncons_raceonly, ncons_racecont), 'tables/notconsider.tex',
         'Estimated race coefficients for not considering communities',
         'tab:notconsider')


ncons_constant_probs <- make_prob_df(ncons_constant, overall=TRUE)
ncons_overall_probs  <- make_prob_df(ncons_contonly, overall=TRUE)
ncons_raceonly_probs <- make_prob_df(ncons_raceonly) %>%
    left_join(ncons_constant_probs, by='comm', suffix=c('','_overall')) %>%
    as_tibble()
ncons_racecont_probs <- make_prob_df(ncons_racecont) %>%
    left_join(ncons_overall_probs, by='comm', suffix=c('','_overall')) %>%
    as_tibble()

prob_dfs <- list(ncons_raceonly_probs, ncons_racecont_probs)
fnames <- sprintf('images/%s.png', c('notconsider', 'notconsider_controls'))
plts <- srch_plots(prob_dfs, fnames, consider=FALSE)
plts[[1]]
plts[[2]]
```
