## Neighborhood Improvement

### Bivariate Analysis
Plot the mean value of respondents who indicated that they think that the neighborhood has gotten better in the past five years.

```{r improvement-descriptives}
## Add whether respondent is satisfied with neighborhood to models,
## only if not already added to model specifications
better_means <- MIcombine(with(dcassvy,
                               svyby(~better, ~dem.race, svymean)))
better_means <- summary(better_means)
better_vals <- data.frame(dem.race=c('White','Asian','Black','Latinx'),
                          better=better_means[5:8,1],
                          ci=better_means[5:8,2])
better_plt <- ggplot(better_vals, aes(x=dem.race, y=better)) +
    geom_errorbar(aes(ymin=better-ci, ymax=better+ci), width=0.1) +
    geom_point() +
    scale_y_continuous(limits=c(0,1), breaks=seq(0,1,.20)) +
    labs(y='Proportion', x='Race')
better_plt
ggsave('images/better_descriptive.png', plot=better_plt,
       height=3, width=4, units='in')
better_model <- MIcombine(with(dcassvy,
                               svyglm(better ~ dem.race, family=quasibinomial)))
```

```{r report-bivariate-improvement-plot, echo=TRUE, include=TRUE}
better_plt
```

(I plan to make this plot show the un-adjusted and adjusted results)

The graph above shows that Latinos and Asians were more likely to say that the neighborhood has improved while blacks and whites are less likely to say that their neighborhoods have improved. The differences, however, are not statistically distinguishable.

### Multivariate Analysis
```{r improvement-analysis, warning=FALSE, results='hide'}
m0_bet <- with(dcassvy,
               svyglm(better ~ sample_tract), family=binomial)
m0_bet <- MIcombine_aic(m0_bet)

m1_bet <- with(dcassvy,
               svyglm(as.formula(paste('better ~', m1, '+ satisfied')), 
                      family=binomial))
m1_bet <- MIcombine_aic(m1_bet)

m2_bet <- with(dcassvy,
               svyglm(as.formula(paste('better ~', m2, '+ satisfied')),
                      family=binomial))
m2_bet <- MIcombine_aic(m2_bet)

m3_bet <- with(dcassvy,
               svyglm(as.formula(paste('better ~', m3, '+ satisfied')),
                      family=binomial))
m3_bet_racewald <- lapply(m3_bet, regTermTest, test.terms=~dem.race, df=NULL)
bet_wald_F <- summary(sapply(m3_bet_racewald, function(x) x$Ftest))
bet_wald_p <- summary(sapply(m3_bet_racewald, function(x) x$p))
m3_bet <- MIcombine_aic(m3_bet)

m4_bet <- with(dcassvy,
               svyglm(as.formula(paste('better ~ ', m4, '+ satisfied')),
                      family=binomial))
m4_bet <- MIcombine_aic(m4_bet)
```

```{r report-better-analysis, echo=TRUE, include=TRUE}
regression_labels_bet <- c(regression_labels, 'Satisfied')
bet_tbl <- report_models(m1_bet, m2_bet, m3_bet, m4_bet,
                         reglabels=regression_labels_bet,
                         caption=paste0('Estimated coefficients predicting ',
                                        'neighborhood improvement'),
                         label='tab:improvement')
bet_tbl
cat(to_latex(bet_tbl), file='tables/improvement.tex')
```
